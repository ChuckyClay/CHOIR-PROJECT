<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memories page</title>
<link rel="stylesheet" href="style.css">
<style>
/* Your existing CSS unchanged */
#memoryDisplay {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    padding: 5px;
    width: 100%;
    margin: auto;
}
.memory-item{
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 10px;
    background: #f8f8f8;
    width: 150px;
    height: 200px;
    text-align: center;
    flex-shrink: 0; 
}
.memory-item img,
.memory-item video {
    width: 100%;
    height: 150px;
    border-radius: 8px;
    cursor: pointer;
}
#uploadmemory{
    cursor: pointer;
    background: #4CAF50;
    color: white;
    padding: 8px 12px;
    border-radius: 5px;
    font-weight: bold;
}
#btn a { text-decoration: none; color: white; }
#btn { background: #333; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
#upload { display: none; }
@media screen and (max-width: 600px){
    .memory-item { width: 100px; height: 150px; }
    .memory-item img, .memory-item video { height: 120px; }
}
</style>
</head>
<body>
<div id="header">
    <h1>ST THOMAS OF AQUINAS CHAPLAINACY CHOIR</h1>
    <h3><i>"Singing is praying twice"</i></h3>
</div>
<h2>Memories</h2>
<p>Here are our memorable moments</p>
<input type="file" id="upload" accept="image/*,video/*" multiple>
<label for="upload" id="uploadmemory">Add Memory</label><br><hr>
<div id="memoryDisplay"></div>
<button id="btn" onclick="location.href='activities.html'">Back</button>

<script>
    const upload = document.getElementById("upload");
const memoryDisplay = document.getElementById("memoryDisplay");

upload.addEventListener("change", function() {
    const files = Array.from(this.files);
    files.forEach(file => {
        const reader = new FileReader();
        reader.onload = function(e) {
            const mediaDiv = document.createElement("div");
            mediaDiv.classList.add("media-item");

            if (file.type.startsWith("image/")) {
                mediaDiv.innerHTML = `
                    <img src="${e.target.result}" alt="choir photo">
                    <button class="delete-btn">Delete</button>
                `;
            } else if (file.type.startsWith("video/")) {
                mediaDiv.innerHTML = `
                    <video src="${e.target.result}" controls></video>
                    <button class="delete-btn">Delete</button>
                    <button class="open-btn">Open</button>
                `;
            }

            memoryDisplay.appendChild(mediaDiv);
        };
        reader.readAsDataURL(file);
    });
    this.value = ""; // Reset file input so same file can be re-added
});

// Handle delete & open buttons (event delegation)
memoryDisplay.addEventListener("click", function(e) {
    if (e.target.classList.contains("delete-btn")) {
        e.target.parentElement.remove();
    } else if (e.target.classList.contains("open-btn")) {
        const video = e.target.parentElement.querySelector("video");
        if (video) {
            const videoUrl = video.src;
            window.open(videoUrl, "_blank"); // open in new page/tab
        }
    }
});

</script>
</body>
</html>